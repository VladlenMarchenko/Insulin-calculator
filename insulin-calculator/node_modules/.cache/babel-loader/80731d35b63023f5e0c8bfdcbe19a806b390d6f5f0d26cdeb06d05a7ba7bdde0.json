{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lolol\\\\OneDrive\\\\Table\\\\\\u041A\\u0430\\u043B\\u044C\\u043A\\u0443\\u043B\\u044F\\u0442\\u043E\\u0440\\\\insulin-calculator\\\\insulin-calculator\\\\src\\\\pages\\\\History.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { getMyHistory } from \"../services/api\";\nimport { Line } from \"react-chartjs-2\";\nimport { Chart as ChartJS, CategoryScale, LinearScale, PointElement, LineElement, Tooltip, Legend } from \"chart.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Tooltip, Legend);\nexport default function History({\n  token\n}) {\n  _s();\n  const [history, setHistory] = useState([]);\n  useEffect(() => {\n    if (!token) return;\n    getMyHistory(token).then(data => setHistory(data || []));\n  }, [token]);\n\n  /* üìà –ì–†–ê–§–ò–ö ‚Äî —Å—Ç–∞—Ä—ã–µ ‚Üí –Ω–æ–≤—ã–µ */\n  const chartData = {\n    labels: history.map(h => new Date(h.created_at).toLocaleDateString()),\n    datasets: [{\n      label: \"–ì–ª—é–∫–æ–∑–∞\",\n      data: history.map(h => Number(h.glucose)),\n      tension: 0.4\n    }, {\n      label: \"–ò–Ω—Å—É–ª–∏–Ω\",\n      data: history.map(h => h.dose !== null ? Number(h.dose) : null),\n      tension: 0.4\n    }]\n  };\n\n  /* üìã –°–ü–ò–°–û–ö ‚Äî –Ω–æ–≤—ã–µ ‚Üí —Å—Ç–∞—Ä—ã–µ */\n  const sortedHistory = [...history].sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u0438\\u0437\\u043C\\u0435\\u0440\\u0435\\u043D\\u0438\\u0439\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), history.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(Line, {\n        data: chartData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: sortedHistory.map(h => {\n        var _h$dose;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: new Date(h.created_at).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), \"\\u0421\\u0430\\u0445\\u0430\\u0440: \", h.glucose, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), \"\\u0418\\u043D\\u0441\\u0443\\u043B\\u0438\\u043D: \", (_h$dose = h.dose) !== null && _h$dose !== void 0 ? _h$dose : \"‚Äî\", \" \\u0435\\u0434.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), h.dose_approved ? /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"green\"\n            },\n            children: \"\\u2705 \\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u043E \\u0432\\u0440\\u0430\\u0447\\u043E\\u043C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              color: \"orange\"\n            },\n            children: \"\\u23F3 \\u041E\\u0436\\u0438\\u0434\\u0430\\u0435\\u0442 \\u043F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u044F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this), h.doctor_comment && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"comment\",\n            children: [\"\\uD83D\\uDCAC \", h.doctor_comment]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)]\n        }, h.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(History, \"PUqjgfw0ccPwtx6QxD6fWqJYeMQ=\");\n_c = History;\nvar _c;\n$RefreshReg$(_c, \"History\");","map":{"version":3,"names":["React","useEffect","useState","getMyHistory","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Tooltip","Legend","jsxDEV","_jsxDEV","register","History","token","_s","history","setHistory","then","data","chartData","labels","map","h","Date","created_at","toLocaleDateString","datasets","label","Number","glucose","tension","dose","sortedHistory","sort","a","b","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","_h$dose","toLocaleString","dose_approved","style","color","doctor_comment","id","_c","$RefreshReg$"],"sources":["C:/Users/lolol/OneDrive/Table/–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä/insulin-calculator/insulin-calculator/src/pages/History.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getMyHistory } from \"../services/api\";\r\nimport { Line } from \"react-chartjs-2\";\r\n\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\n\r\nChartJS.register(\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nexport default function History({ token }) {\r\n  const [history, setHistory] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    getMyHistory(token).then((data) =>\r\n      setHistory(data || [])\r\n    );\r\n  }, [token]);\r\n\r\n  /* üìà –ì–†–ê–§–ò–ö ‚Äî —Å—Ç–∞—Ä—ã–µ ‚Üí –Ω–æ–≤—ã–µ */\r\n  const chartData = {\r\n    labels: history.map((h) =>\r\n      new Date(h.created_at).toLocaleDateString()\r\n    ),\r\n    datasets: [\r\n      {\r\n        label: \"–ì–ª—é–∫–æ–∑–∞\",\r\n        data: history.map((h) => Number(h.glucose)),\r\n        tension: 0.4,\r\n      },\r\n      {\r\n        label: \"–ò–Ω—Å—É–ª–∏–Ω\",\r\n        data: history.map((h) =>\r\n          h.dose !== null ? Number(h.dose) : null\r\n        ),\r\n        tension: 0.4,\r\n      },\r\n    ],\r\n  };\r\n\r\n  /* üìã –°–ü–ò–°–û–ö ‚Äî –Ω–æ–≤—ã–µ ‚Üí —Å—Ç–∞—Ä—ã–µ */\r\n  const sortedHistory = [...history].sort(\r\n    (a, b) =>\r\n      new Date(b.created_at) - new Date(a.created_at)\r\n  );\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏–π</h2>\r\n\r\n      {history.length > 0 && (\r\n        <div className=\"card\">\r\n          <Line data={chartData} />\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"card\">\r\n        {sortedHistory.map((h) => (\r\n          <div key={h.id}>\r\n            <strong>\r\n              {new Date(h.created_at).toLocaleString()}\r\n            </strong>\r\n            <br />\r\n            –°–∞—Ö–∞—Ä: {h.glucose}\r\n            <br />\r\n            –ò–Ω—Å—É–ª–∏–Ω: {h.dose ?? \"‚Äî\"} –µ–¥.\r\n            <br />\r\n\r\n            {h.dose_approved ? (\r\n              <span style={{ color: \"green\" }}>\r\n                ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –≤—Ä–∞—á–æ–º\r\n              </span>\r\n            ) : (\r\n              <span style={{ color: \"orange\" }}>\r\n                ‚è≥ –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è\r\n              </span>\r\n            )}\r\n\r\n            {h.doctor_comment && (\r\n              <div className=\"comment\">\r\n                üí¨ {h.doctor_comment}\r\n              </div>\r\n            )}\r\n\r\n            <hr />\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,IAAI,QAAQ,iBAAiB;AAEtC,SACEC,KAAK,IAAIC,OAAO,EAChBC,aAAa,EACbC,WAAW,EACXC,YAAY,EACZC,WAAW,EACXC,OAAO,EACPC,MAAM,QACD,UAAU;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElBR,OAAO,CAACS,QAAQ,CACdR,aAAa,EACbC,WAAW,EACXC,YAAY,EACZC,WAAW,EACXC,OAAO,EACPC,MACF,CAAC;AAED,eAAe,SAASI,OAAOA,CAAC;EAAEC;AAAM,CAAC,EAAE;EAAAC,EAAA;EACzC,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC;EAE1CD,SAAS,CAAC,MAAM;IACd,IAAI,CAACgB,KAAK,EAAE;IACZd,YAAY,CAACc,KAAK,CAAC,CAACI,IAAI,CAAEC,IAAI,IAC5BF,UAAU,CAACE,IAAI,IAAI,EAAE,CACvB,CAAC;EACH,CAAC,EAAE,CAACL,KAAK,CAAC,CAAC;;EAEX;EACA,MAAMM,SAAS,GAAG;IAChBC,MAAM,EAAEL,OAAO,CAACM,GAAG,CAAEC,CAAC,IACpB,IAAIC,IAAI,CAACD,CAAC,CAACE,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAC5C,CAAC;IACDC,QAAQ,EAAE,CACR;MACEC,KAAK,EAAE,SAAS;MAChBT,IAAI,EAAEH,OAAO,CAACM,GAAG,CAAEC,CAAC,IAAKM,MAAM,CAACN,CAAC,CAACO,OAAO,CAAC,CAAC;MAC3CC,OAAO,EAAE;IACX,CAAC,EACD;MACEH,KAAK,EAAE,SAAS;MAChBT,IAAI,EAAEH,OAAO,CAACM,GAAG,CAAEC,CAAC,IAClBA,CAAC,CAACS,IAAI,KAAK,IAAI,GAAGH,MAAM,CAACN,CAAC,CAACS,IAAI,CAAC,GAAG,IACrC,CAAC;MACDD,OAAO,EAAE;IACX,CAAC;EAEL,CAAC;;EAED;EACA,MAAME,aAAa,GAAG,CAAC,GAAGjB,OAAO,CAAC,CAACkB,IAAI,CACrC,CAACC,CAAC,EAAEC,CAAC,KACH,IAAIZ,IAAI,CAACY,CAAC,CAACX,UAAU,CAAC,GAAG,IAAID,IAAI,CAACW,CAAC,CAACV,UAAU,CAClD,CAAC;EAED,oBACEd,OAAA;IAAK0B,SAAS,EAAC,WAAW;IAAAC,QAAA,gBACxB3B,OAAA;MAAA2B,QAAA,EAAI;IAAiB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAEzB1B,OAAO,CAAC2B,MAAM,GAAG,CAAC,iBACjBhC,OAAA;MAAK0B,SAAS,EAAC,MAAM;MAAAC,QAAA,eACnB3B,OAAA,CAACV,IAAI;QAACkB,IAAI,EAAEC;MAAU;QAAAmB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtB,CACN,eAED/B,OAAA;MAAK0B,SAAS,EAAC,MAAM;MAAAC,QAAA,EAClBL,aAAa,CAACX,GAAG,CAAEC,CAAC;QAAA,IAAAqB,OAAA;QAAA,oBACnBjC,OAAA;UAAA2B,QAAA,gBACE3B,OAAA;YAAA2B,QAAA,EACG,IAAId,IAAI,CAACD,CAAC,CAACE,UAAU,CAAC,CAACoB,cAAc,CAAC;UAAC;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClC,CAAC,eACT/B,OAAA;YAAA4B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,oCACC,EAACnB,CAAC,CAACO,OAAO,eACjBnB,OAAA;YAAA4B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,gDACG,GAAAE,OAAA,GAACrB,CAAC,CAACS,IAAI,cAAAY,OAAA,cAAAA,OAAA,GAAI,GAAG,EAAC,gBACxB,eAAAjC,OAAA;YAAA4B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,EAELnB,CAAC,CAACuB,aAAa,gBACdnC,OAAA;YAAMoC,KAAK,EAAE;cAAEC,KAAK,EAAE;YAAQ,CAAE;YAAAV,QAAA,EAAC;UAEjC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,gBAEP/B,OAAA;YAAMoC,KAAK,EAAE;cAAEC,KAAK,EAAE;YAAS,CAAE;YAAAV,QAAA,EAAC;UAElC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CACP,EAEAnB,CAAC,CAAC0B,cAAc,iBACftC,OAAA;YAAK0B,SAAS,EAAC,SAAS;YAAAC,QAAA,GAAC,eACpB,EAACf,CAAC,CAAC0B,cAAc;UAAA;YAAAV,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB,CACN,eAED/B,OAAA;YAAA4B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA,GA1BEnB,CAAC,CAAC2B,EAAE;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OA2BT,CAAC;MAAA,CACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC3B,EAAA,CAjFuBF,OAAO;AAAAsC,EAAA,GAAPtC,OAAO;AAAA,IAAAsC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}