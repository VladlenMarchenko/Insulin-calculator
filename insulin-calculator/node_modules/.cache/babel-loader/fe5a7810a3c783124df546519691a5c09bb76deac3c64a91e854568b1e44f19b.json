{"ast":null,"code":"import jsPDF from \"jspdf\";\nimport html2canvas from \"html2canvas\";\nexport async function generatePatientPDF({\n  profile,\n  history\n}) {\n  const pdf = new jsPDF(\"p\", \"mm\", \"a4\");\n  const container = document.createElement(\"div\");\n  container.style.padding = \"20px\";\n  container.style.width = \"600px\";\n  container.style.background = \"#fff\";\n  container.style.fontFamily = \"Arial\";\n  container.innerHTML = `\n    <h2>Медицинский отчёт пациента</h2>\n\n    ${profile.photo ? `<img src=\"${profile.photo}\" style=\"width:120px;border-radius:50%;margin-bottom:12px;\" />` : \"\"}\n\n    <p><strong>Email:</strong> ${profile.email}</p>\n    <p><strong>Рост:</strong> ${profile.height || \"—\"}</p>\n    <p><strong>Вес:</strong> ${profile.weight || \"—\"}</p>\n    <p><strong>Заболевания:</strong> ${profile.diseases || \"—\"}</p>\n\n    <h3>История измерений</h3>\n    <table border=\"1\" cellpadding=\"6\" cellspacing=\"0\" width=\"100%\">\n      <thead>\n        <tr>\n          <th>Дата</th>\n          <th>Глюкоза</th>\n          <th>Инсулин</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${history.map(h => {\n    var _h$dose;\n    return `\n          <tr>\n            <td>${new Date(h.created_at).toLocaleDateString()}</td>\n            <td>${h.glucose}</td>\n            <td>${(_h$dose = h.dose) !== null && _h$dose !== void 0 ? _h$dose : \"—\"}</td>\n          </tr>\n        `;\n  }).join(\"\")}\n      </tbody>\n    </table>\n  `;\n  document.body.appendChild(container);\n  const canvas = await html2canvas(container, {\n    scale: 2\n  });\n  const imgData = canvas.toDataURL(\"image/png\");\n  pdf.addImage(imgData, \"PNG\", 10, 10, 190, 0);\n  pdf.save(`patient_${profile.email}.pdf`);\n  document.body.removeChild(container);\n}","map":{"version":3,"names":["jsPDF","html2canvas","generatePatientPDF","profile","history","pdf","container","document","createElement","style","padding","width","background","fontFamily","innerHTML","photo","email","height","weight","diseases","map","h","_h$dose","Date","created_at","toLocaleDateString","glucose","dose","join","body","appendChild","canvas","scale","imgData","toDataURL","addImage","save","removeChild"],"sources":["C:/Users/lolol/OneDrive/Table/Калькулятор/insulin-calculator/insulin-calculator/src/utils/pdf.js"],"sourcesContent":["import jsPDF from \"jspdf\";\r\nimport html2canvas from \"html2canvas\";\r\n\r\nexport async function generatePatientPDF({ profile, history }) {\r\n  const pdf = new jsPDF(\"p\", \"mm\", \"a4\");\r\n\r\n  const container = document.createElement(\"div\");\r\n  container.style.padding = \"20px\";\r\n  container.style.width = \"600px\";\r\n  container.style.background = \"#fff\";\r\n  container.style.fontFamily = \"Arial\";\r\n\r\n  container.innerHTML = `\r\n    <h2>Медицинский отчёт пациента</h2>\r\n\r\n    ${\r\n      profile.photo\r\n        ? `<img src=\"${profile.photo}\" style=\"width:120px;border-radius:50%;margin-bottom:12px;\" />`\r\n        : \"\"\r\n    }\r\n\r\n    <p><strong>Email:</strong> ${profile.email}</p>\r\n    <p><strong>Рост:</strong> ${profile.height || \"—\"}</p>\r\n    <p><strong>Вес:</strong> ${profile.weight || \"—\"}</p>\r\n    <p><strong>Заболевания:</strong> ${profile.diseases || \"—\"}</p>\r\n\r\n    <h3>История измерений</h3>\r\n    <table border=\"1\" cellpadding=\"6\" cellspacing=\"0\" width=\"100%\">\r\n      <thead>\r\n        <tr>\r\n          <th>Дата</th>\r\n          <th>Глюкоза</th>\r\n          <th>Инсулин</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        ${history\r\n          .map(\r\n            (h) => `\r\n          <tr>\r\n            <td>${new Date(h.created_at).toLocaleDateString()}</td>\r\n            <td>${h.glucose}</td>\r\n            <td>${h.dose ?? \"—\"}</td>\r\n          </tr>\r\n        `\r\n          )\r\n          .join(\"\")}\r\n      </tbody>\r\n    </table>\r\n  `;\r\n\r\n  document.body.appendChild(container);\r\n\r\n  const canvas = await html2canvas(container, { scale: 2 });\r\n  const imgData = canvas.toDataURL(\"image/png\");\r\n\r\n  pdf.addImage(imgData, \"PNG\", 10, 10, 190, 0);\r\n  pdf.save(`patient_${profile.email}.pdf`);\r\n\r\n  document.body.removeChild(container);\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,aAAa;AAErC,OAAO,eAAeC,kBAAkBA,CAAC;EAAEC,OAAO;EAAEC;AAAQ,CAAC,EAAE;EAC7D,MAAMC,GAAG,GAAG,IAAIL,KAAK,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC;EAEtC,MAAMM,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EAC/CF,SAAS,CAACG,KAAK,CAACC,OAAO,GAAG,MAAM;EAChCJ,SAAS,CAACG,KAAK,CAACE,KAAK,GAAG,OAAO;EAC/BL,SAAS,CAACG,KAAK,CAACG,UAAU,GAAG,MAAM;EACnCN,SAAS,CAACG,KAAK,CAACI,UAAU,GAAG,OAAO;EAEpCP,SAAS,CAACQ,SAAS,GAAG;AACxB;AACA;AACA,MACMX,OAAO,CAACY,KAAK,GACT,aAAaZ,OAAO,CAACY,KAAK,gEAAgE,GAC1F,EAAE;AACZ;AACA,iCACiCZ,OAAO,CAACa,KAAK;AAC9C,gCAAgCb,OAAO,CAACc,MAAM,IAAI,GAAG;AACrD,+BAA+Bd,OAAO,CAACe,MAAM,IAAI,GAAG;AACpD,uCAAuCf,OAAO,CAACgB,QAAQ,IAAI,GAAG;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAUf,OAAO,CACNgB,GAAG,CACDC,CAAC;IAAA,IAAAC,OAAA;IAAA,OAAK;AACnB;AACA,kBAAkB,IAAIC,IAAI,CAACF,CAAC,CAACG,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC;AAC7D,kBAAkBJ,CAAC,CAACK,OAAO;AAC3B,kBAD2B,CAAAJ,OAAA,GACTD,CAAC,CAACM,IAAI,cAAAL,OAAA,cAAAA,OAAA,GAAI,GAAG;AAC/B;AACA,SAAS;EAAA,CACC,CAAC,CACAM,IAAI,CAAC,EAAE,CAAC;AACnB;AACA;AACA,GAAG;EAEDrB,QAAQ,CAACsB,IAAI,CAACC,WAAW,CAACxB,SAAS,CAAC;EAEpC,MAAMyB,MAAM,GAAG,MAAM9B,WAAW,CAACK,SAAS,EAAE;IAAE0B,KAAK,EAAE;EAAE,CAAC,CAAC;EACzD,MAAMC,OAAO,GAAGF,MAAM,CAACG,SAAS,CAAC,WAAW,CAAC;EAE7C7B,GAAG,CAAC8B,QAAQ,CAACF,OAAO,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;EAC5C5B,GAAG,CAAC+B,IAAI,CAAC,WAAWjC,OAAO,CAACa,KAAK,MAAM,CAAC;EAExCT,QAAQ,CAACsB,IAAI,CAACQ,WAAW,CAAC/B,SAAS,CAAC;AACtC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}