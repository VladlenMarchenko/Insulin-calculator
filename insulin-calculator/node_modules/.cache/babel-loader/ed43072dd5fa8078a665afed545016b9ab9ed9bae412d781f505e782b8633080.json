{"ast":null,"code":"import jsPDF from \"jspdf\";\nimport html2canvas from \"html2canvas\";\nexport async function generatePatientPDF({\n  profile,\n  history\n}) {\n  const pdf = new jsPDF(\"p\", \"mm\", \"a4\");\n\n  // === ВРЕМЕННЫЙ КОНТЕЙНЕР ===\n  const container = document.createElement(\"div\");\n  container.style.padding = \"20px\";\n  container.style.width = \"600px\";\n  container.style.background = \"#fff\";\n  container.innerHTML = `\n    <h2>Медицинский отчёт пациента</h2>\n    <p><strong>Email:</strong> ${profile.email}</p>\n    <p><strong>Рост:</strong> ${profile.height || \"—\"}</p>\n    <p><strong>Вес:</strong> ${profile.weight || \"—\"}</p>\n    <p><strong>Заболевания:</strong> ${profile.diseases || \"—\"}</p>\n\n    <h3>История измерений</h3>\n    <table border=\"1\" cellpadding=\"6\" cellspacing=\"0\" width=\"100%\">\n      <thead>\n        <tr>\n          <th>Дата</th>\n          <th>Глюкоза</th>\n          <th>Инсулин</th>\n        </tr>\n      </thead>\n      <tbody>\n        ${history.map(h => `\n          <tr>\n            <td>${new Date(h.created_at).toLocaleDateString()}</td>\n            <td>${h.glucose}</td>\n            <td>${h.insulin}</td>\n          </tr>\n        `).join(\"\")}\n      </tbody>\n    </table>\n  `;\n  document.body.appendChild(container);\n\n  // === РЕНДЕР В КАРТИНКУ ===\n  const canvas = await html2canvas(container, {\n    scale: 2\n  });\n  const imgData = canvas.toDataURL(\"image/png\");\n  pdf.addImage(imgData, \"PNG\", 10, 10, 190, 0);\n  pdf.save(`patient_${profile.email}.pdf`);\n  document.body.removeChild(container);\n}","map":{"version":3,"names":["jsPDF","html2canvas","generatePatientPDF","profile","history","pdf","container","document","createElement","style","padding","width","background","innerHTML","email","height","weight","diseases","map","h","Date","created_at","toLocaleDateString","glucose","insulin","join","body","appendChild","canvas","scale","imgData","toDataURL","addImage","save","removeChild"],"sources":["C:/Users/lolol/OneDrive/Table/Калькулятор/insulin-calculator/insulin-calculator/src/utils/pdf.js"],"sourcesContent":["import jsPDF from \"jspdf\";\r\nimport html2canvas from \"html2canvas\";\r\n\r\nexport async function generatePatientPDF({ profile, history }) {\r\n  const pdf = new jsPDF(\"p\", \"mm\", \"a4\");\r\n\r\n  // === ВРЕМЕННЫЙ КОНТЕЙНЕР ===\r\n  const container = document.createElement(\"div\");\r\n  container.style.padding = \"20px\";\r\n  container.style.width = \"600px\";\r\n  container.style.background = \"#fff\";\r\n\r\n  container.innerHTML = `\r\n    <h2>Медицинский отчёт пациента</h2>\r\n    <p><strong>Email:</strong> ${profile.email}</p>\r\n    <p><strong>Рост:</strong> ${profile.height || \"—\"}</p>\r\n    <p><strong>Вес:</strong> ${profile.weight || \"—\"}</p>\r\n    <p><strong>Заболевания:</strong> ${profile.diseases || \"—\"}</p>\r\n\r\n    <h3>История измерений</h3>\r\n    <table border=\"1\" cellpadding=\"6\" cellspacing=\"0\" width=\"100%\">\r\n      <thead>\r\n        <tr>\r\n          <th>Дата</th>\r\n          <th>Глюкоза</th>\r\n          <th>Инсулин</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        ${history\r\n          .map(\r\n            (h) => `\r\n          <tr>\r\n            <td>${new Date(h.created_at).toLocaleDateString()}</td>\r\n            <td>${h.glucose}</td>\r\n            <td>${h.insulin}</td>\r\n          </tr>\r\n        `\r\n          )\r\n          .join(\"\")}\r\n      </tbody>\r\n    </table>\r\n  `;\r\n\r\n  document.body.appendChild(container);\r\n\r\n  // === РЕНДЕР В КАРТИНКУ ===\r\n  const canvas = await html2canvas(container, { scale: 2 });\r\n  const imgData = canvas.toDataURL(\"image/png\");\r\n\r\n  pdf.addImage(imgData, \"PNG\", 10, 10, 190, 0);\r\n\r\n  pdf.save(`patient_${profile.email}.pdf`);\r\n\r\n  document.body.removeChild(container);\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,aAAa;AAErC,OAAO,eAAeC,kBAAkBA,CAAC;EAAEC,OAAO;EAAEC;AAAQ,CAAC,EAAE;EAC7D,MAAMC,GAAG,GAAG,IAAIL,KAAK,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC;;EAEtC;EACA,MAAMM,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;EAC/CF,SAAS,CAACG,KAAK,CAACC,OAAO,GAAG,MAAM;EAChCJ,SAAS,CAACG,KAAK,CAACE,KAAK,GAAG,OAAO;EAC/BL,SAAS,CAACG,KAAK,CAACG,UAAU,GAAG,MAAM;EAEnCN,SAAS,CAACO,SAAS,GAAG;AACxB;AACA,iCAAiCV,OAAO,CAACW,KAAK;AAC9C,gCAAgCX,OAAO,CAACY,MAAM,IAAI,GAAG;AACrD,+BAA+BZ,OAAO,CAACa,MAAM,IAAI,GAAG;AACpD,uCAAuCb,OAAO,CAACc,QAAQ,IAAI,GAAG;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAUb,OAAO,CACNc,GAAG,CACDC,CAAC,IAAK;AACnB;AACA,kBAAkB,IAAIC,IAAI,CAACD,CAAC,CAACE,UAAU,CAAC,CAACC,kBAAkB,CAAC,CAAC;AAC7D,kBAAkBH,CAAC,CAACI,OAAO;AAC3B,kBAAkBJ,CAAC,CAACK,OAAO;AAC3B;AACA,SACU,CAAC,CACAC,IAAI,CAAC,EAAE,CAAC;AACnB;AACA;AACA,GAAG;EAEDlB,QAAQ,CAACmB,IAAI,CAACC,WAAW,CAACrB,SAAS,CAAC;;EAEpC;EACA,MAAMsB,MAAM,GAAG,MAAM3B,WAAW,CAACK,SAAS,EAAE;IAAEuB,KAAK,EAAE;EAAE,CAAC,CAAC;EACzD,MAAMC,OAAO,GAAGF,MAAM,CAACG,SAAS,CAAC,WAAW,CAAC;EAE7C1B,GAAG,CAAC2B,QAAQ,CAACF,OAAO,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,CAAC;EAE5CzB,GAAG,CAAC4B,IAAI,CAAC,WAAW9B,OAAO,CAACW,KAAK,MAAM,CAAC;EAExCP,QAAQ,CAACmB,IAAI,CAACQ,WAAW,CAAC5B,SAAS,CAAC;AACtC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}