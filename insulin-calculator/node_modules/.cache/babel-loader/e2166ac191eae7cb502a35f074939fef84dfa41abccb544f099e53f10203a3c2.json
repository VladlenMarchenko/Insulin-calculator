{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lolol\\\\OneDrive\\\\Table\\\\\\u041A\\u0430\\u043B\\u044C\\u043A\\u0443\\u043B\\u044F\\u0442\\u043E\\u0440\\\\insulin-calculator\\\\insulin-calculator\\\\src\\\\pages\\\\History.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { Chart as ChartJS, LineElement, CategoryScale, LinearScale, PointElement, Tooltip, Legend } from \"chart.js\";\nimport { getMyHistory } from \"../services/api\";\nimport jsPDF from \"jspdf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(LineElement, CategoryScale, LinearScale, PointElement, Tooltip, Legend);\nexport default function History({\n  token\n}) {\n  _s();\n  const [history, setHistory] = useState([]);\n  const [days, setDays] = useState(7);\n  useEffect(() => {\n    getMyHistory(token).then(setHistory);\n  }, []);\n  const filtered = history.filter(h => {\n    const d = new Date(h.date);\n    const limit = new Date();\n    limit.setDate(limit.getDate() - days);\n    return d >= limit;\n  });\n  const exportPDF = () => {\n    const pdf = new jsPDF();\n    pdf.text(\"–ò—Å—Ç–æ—Ä–∏—è –≥–ª—é–∫–æ–∑—ã\", 20, 20);\n    let y = 40;\n    filtered.forEach(h => {\n      pdf.text(`${h.date}: ${h.glucose}`, 20, y);\n      y += 10;\n    });\n    pdf.save(\"history.pdf\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      onChange: e => setDays(+e.target.value),\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: 7,\n        children: \"7 \\u0434\\u043D\\u0435\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: 14,\n        children: \"14 \\u0434\\u043D\\u0435\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: 30,\n        children: \"30 \\u0434\\u043D\\u0435\\u0439\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), filtered.length > 0 ? /*#__PURE__*/_jsxDEV(Line, {\n      data: {\n        labels: filtered.map(h => h.date),\n        datasets: [{\n          label: \"–ì–ª—é–∫–æ–∑–∞\",\n          data: filtered.map(h => h.glucose),\n          borderWidth: 2,\n          tension: 0.4\n        }]\n      },\n      options: {\n        responsive: true,\n        plugins: {\n          legend: {\n            display: true\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: false\n          }\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"\\u041D\\u0435\\u0442 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0437\\u0430 \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u044B\\u0439 \\u043F\\u0435\\u0440\\u0438\\u043E\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: exportPDF,\n      children: \"\\uD83D\\uDCC4 \\u042D\\u043A\\u0441\\u043F\\u043E\\u0440\\u0442 PDF\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n_s(History, \"rZebdmpM5Ag6UN9GWCiVxIsDjFU=\");\n_c = History;\nvar _c;\n$RefreshReg$(_c, \"History\");","map":{"version":3,"names":["useEffect","useState","Line","Chart","ChartJS","LineElement","CategoryScale","LinearScale","PointElement","Tooltip","Legend","getMyHistory","jsPDF","jsxDEV","_jsxDEV","register","History","token","_s","history","setHistory","days","setDays","then","filtered","filter","h","d","Date","date","limit","setDate","getDate","exportPDF","pdf","text","y","forEach","glucose","save","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onChange","e","target","value","length","data","labels","map","datasets","label","borderWidth","tension","options","responsive","plugins","legend","display","scales","beginAtZero","onClick","_c","$RefreshReg$"],"sources":["C:/Users/lolol/OneDrive/Table/–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä/insulin-calculator/insulin-calculator/src/pages/History.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport {\r\n  Chart as ChartJS,\r\n  LineElement,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  Tooltip,\r\n  Legend,\r\n} from \"chart.js\";\r\nimport { getMyHistory } from \"../services/api\";\r\nimport jsPDF from \"jspdf\";\r\n\r\nChartJS.register(\r\n  LineElement,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  Tooltip,\r\n  Legend\r\n);\r\n\r\nexport default function History({ token }) {\r\n  const [history, setHistory] = useState([]);\r\n  const [days, setDays] = useState(7);\r\n\r\n  useEffect(() => {\r\n    getMyHistory(token).then(setHistory);\r\n  }, []);\r\n\r\n  const filtered = history.filter((h) => {\r\n    const d = new Date(h.date);\r\n    const limit = new Date();\r\n    limit.setDate(limit.getDate() - days);\r\n    return d >= limit;\r\n  });\r\n\r\n  const exportPDF = () => {\r\n    const pdf = new jsPDF();\r\n    pdf.text(\"–ò—Å—Ç–æ—Ä–∏—è –≥–ª—é–∫–æ–∑—ã\", 20, 20);\r\n\r\n    let y = 40;\r\n    filtered.forEach((h) => {\r\n      pdf.text(`${h.date}: ${h.glucose}`, 20, y);\r\n      y += 10;\r\n    });\r\n\r\n    pdf.save(\"history.pdf\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>–ò—Å—Ç–æ—Ä–∏—è</h1>\r\n\r\n      <select onChange={(e) => setDays(+e.target.value)}>\r\n        <option value={7}>7 –¥–Ω–µ–π</option>\r\n        <option value={14}>14 –¥–Ω–µ–π</option>\r\n        <option value={30}>30 –¥–Ω–µ–π</option>\r\n      </select>\r\n\r\n      {filtered.length > 0 ? (\r\n        <Line\r\n          data={{\r\n            labels: filtered.map((h) => h.date),\r\n            datasets: [\r\n              {\r\n                label: \"–ì–ª—é–∫–æ–∑–∞\",\r\n                data: filtered.map((h) => h.glucose),\r\n                borderWidth: 2,\r\n                tension: 0.4,\r\n              },\r\n            ],\r\n          }}\r\n          options={{\r\n            responsive: true,\r\n            plugins: {\r\n              legend: { display: true },\r\n            },\r\n            scales: {\r\n              y: { beginAtZero: false },\r\n            },\r\n          }}\r\n        />\r\n      ) : (\r\n        <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥</p>\r\n      )}\r\n\r\n      <button onClick={exportPDF}>üìÑ –≠–∫—Å–ø–æ—Ä—Ç PDF</button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}